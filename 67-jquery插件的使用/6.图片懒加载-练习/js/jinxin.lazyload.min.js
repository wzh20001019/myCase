/*! JinXin LazyLoad 1.0.0  - By Datou*/
!function(f,e){var h={getByClass:function(j,i){for(var n=j.getElementsByTagName("*"),m=[],l=new RegExp("\\b"+i+"\\b","i"),k=0;k<n.length;k++){l.test(n[k].className)&&m.push(n[k])}return m},get_pos:function(j){if(!j){return !1}var i=j.offsetLeft,l=j.offsetTop,k=j;if(l){k=j.offsetParent||j.parentNode}else{for(;k!=document&&null!=k&&!k.offsetTop;){k=k.parentNode}}for(;k!=document&&null!=k;){i+=k.offsetLeft,l+=k.offsetTop,k=k.offsetParent||k.parentNode}return{left:i,top:l}},removeClass:function(j,i){if(!j||!j.className){return !1}for(var m=j.className.split(" "),l=!1,k=0;k<m.length;k++){if(m[k]===i){m.splice(k,1),l=!0;break}}if(l){if(j.className="",m.length<1){return l}if(1==m.length){j.className=m[0]}else{if(m.length>1){for(var k=0;k<m.length;k++){k==m.length-1?j.className+=m[k]:j.className+=m[k]+" "}}}}return l},addEvent:function(i,d,j){if(i){if(i.addEventListener){return i.addEventListener(d,j,!1)}if(i.attachEvent){return i.attachEvent("on"+d,j)}i["on"+d]=j}},removeEvent:function(i,d,j){if(i){if(i.removeEventListener){return i.removeEventListener(d,j,!1)}if(i.detachEvent){return i.detachEvent("on"+d,j)}i["on"+d]=null}},startMove:function(i,c,j){clearInterval(i.timer),i.timer=setInterval(function(){var k=!0;for(var d in c){var b=0;b="opacity"==d?parseInt(100*parseFloat(h.getStyle(i,d))):parseInt(h.getStyle(i,d));var a=(c[d]-b)/8;a=a>0?Math.ceil(a):Math.floor(a),b!=c[d]&&(k=!1),"opacity"==d?(i.style.filter="alpha(opacity:"+(b+a)+")",i.style.opacity=(b+a)/100):i.style[d]=b+a+"px"}k&&(clearInterval(i.timer),j&&j())},60)},getStyle:function(d,c){return d.currentStyle?d.currentStyle[c]:getComputedStyle(d,!1)[c]}},g={init:function(){this.parm(),this.getImg(),this.getPos(),this.bindEvent(),this.lazyShow()},parm:function(){var b=e.getElementById("jxManLazyLoad");this.img={},this.img.onerrorImgUrl="",this.img.srcStore=b?b.getAttribute("jxdata-attr"):"jxLazyImg",this.img.className=b?b.getAttribute("jxdata-class"):"jxLazyClass",this.img.lazy=b?parseInt(b.getAttribute("jxdata-lazy")):20},getImg:function(){this.img.node=h.getByClass(e.getElementsByTagName("body")[0],this.img.className),this.img.length=this.img.node.length},getPos:function(){for(var d=g,c=0;c<d.img.node.length;c++){d.img.node[c].xLazyPos=h.get_pos(d.img.node[c])}},bindEvent:function(){this.img.node.length>0&&(h.addEvent(f,"scroll",this.lazyShow),h.addEvent(f,"resize",this.getPos))},lazyShow:function(){var d=g,c=f.innerHeight||document.documentElement.clientHeight,b=document.body.scrollTop||document.documentElement.scrollTop;if(d.img.length>0){for(var a=0;a<d.img.node.length;a++){~function(j){var i=d.img.node[j],l=i.getAttribute(d.img.srcStore);i.xLazyPos=h.get_pos(i);if(l&&c+b+d.img.lazy>=i.xLazyPos.top&&b-d.img.lazy<=i.xLazyPos.top){var k=new Image;k.onload=function(){i.style.filter="alpha(opacity=0)",i.style.opacity=0,i.removeAttribute(d.img.srcStore),h.removeClass(i,d.img.className),d.img.length--,i.setAttribute("src",l),h.startMove(i,{opacity:"100"})},k.src=l}}(a)}}else{d.img.node=h.getByClass(e.getElementsByTagName("body")[0],d.img.className),d.img.length=d.img.node.length,d.img.length<=0&&(h.removeEvent(f,"scroll",d.lazyShow),h.removeEvent(f,"resize",d.getPos))}}};g.init()}(window,document);